<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Clean data from the World Database on Protected Areas — wdpa_clean • wdpar</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Clean data from the World Database on Protected Areas — wdpa_clean" />
<meta property="og:description" content="Clean data obtained from the World Database on Protected Areas (WDPA)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">wdpar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/wdpar.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/wdpar/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Clean data from the World Database on Protected Areas</h1>
    <small class="dont-index">Source: <a href='https://github.com/prioritizr/wdpar/blob/master/R/wdpa_clean.R'><code>R/wdpa_clean.R</code></a></small>
    <div class="hidden name"><code>wdpa_clean.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Clean data obtained from the World Database on Protected Areas (WDPA).</p>
    </div>

    <pre class="usage"><span class='fu'>wdpa_clean</span><span class='op'>(</span>
  <span class='va'>x</span>,
  crs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"+proj=cea +lon_0=0 +lat_ts=30 +x_0=0"</span>,
    <span class='st'>"+y_0=0 +datum=WGS84 +ellps=WGS84 +units=m +no_defs"</span><span class='op'>)</span>,
  snap_tolerance <span class='op'>=</span> <span class='fl'>1</span>,
  simplify_tolerance <span class='op'>=</span> <span class='fl'>0</span>,
  geometry_precision <span class='op'>=</span> <span class='fl'>1500</span>,
  erase_overlaps <span class='op'>=</span> <span class='cn'>TRUE</span>,
  verbose <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='https://r-spatial.github.io/sf/reference/sf.html'>sf::sf()</a></code> object containing protected area data.</p></td>
    </tr>
    <tr>
      <th>crs</th>
      <td><p><code>character</code> or codeinteger object representing a
coordinate reference system. Defaults to World Behrmann
(<em>ESRI:54017</em>).</p></td>
    </tr>
    <tr>
      <th>snap_tolerance</th>
      <td><p><code>numeric</code> tolerance for snapping geometry to a
grid for resolving invalid geometries. Defaults to 1 meter.</p></td>
    </tr>
    <tr>
      <th>simplify_tolerance</th>
      <td><p><code>numeric</code> simplification tolerance.
Defaults to 0 meters.</p></td>
    </tr>
    <tr>
      <th>geometry_precision</th>
      <td><p><code>numeric</code> level of precision for processing
the spatial data (used with <code><a href='https://r-spatial.github.io/sf/reference/st_precision.html'>sf::st_set_precision()</a></code>). The
default argument is 1500 (higher values indicate higher precision).
This level of precision is generally suitable for analyses at the
national-scale. For analyses at finer-scale resolutions, please
consider using a greater value (e.g. 10000).</p></td>
    </tr>
    <tr>
      <th>erase_overlaps</th>
      <td><p><code>logical</code> should overlapping boundaries be
erased? This is useful for making comparisons between individual
protected areas and understanding their "effective" geographic coverage.
On the other hand, this processing step may not be needed
(e.g. if the protected area boundaries are going to be rasterized), and so
processing time can be substantially by skipping this step and setting
the argument to <code>FALSE</code>. Defaults to <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p><code>logical</code> should progress on data cleaning be reported?
Defaults to <code>TRUE</code> in an interactive session, otherwise
<code>FALSE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code><a href='https://r-spatial.github.io/sf/reference/sf.html'>sf::sf()</a></code> object.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function cleans data from World Database on Protected Areas
following best practices (Butchart <em>et al.</em> 2015, Runge <em>et al.</em>
2015,
<a href='https://www.protectedplanet.net/en/resources/calculating-protected-area-coverage'>https://www.protectedplanet.net/en/resources/calculating-protected-area-coverage</a>).
To obtain accurate protected area coverage statistics for a country,
please note that you will need to manually clip the cleaned data to
the countries' coastline and its Exclusive Economic Zone (EEZ).
Although this function can <em>in theory</em> be used to clean the global
dataset, this process can take several weeks to complete. Therefore, it is
strongly recommended to use alternative methods for cleaning the global
dataset.</p>
<ol>
<li><p>Repair invalid geometry (using <code><a href='https://r-spatial.github.io/sf/reference/valid.html'>sf::st_make_valid()</a></code>).</p></li>
<li><p>Exclude protected areas that are not currently implemented
(i.e. exclude areas without the status <code>"Designated"</code>,
<code>"Inscribed"</code>, <code>"Established"</code>).</p></li>
<li><p>Exclude United Nations Educational, Scientific and Cultural
Organization (UNESCO) Biosphere Reserves (Coetzer <em>et al.</em> 2014).</p></li>
<li><p>Create a field (<code>"GEOMETRY_TYPE"</code>) indicating if areas are
represented as point localities (<code>"POINT"</code>) or as polygons
(<code>"POLYGON"</code>).</p></li>
<li><p>Exclude areas represented as point localities that do not
have a reported spatial extent (i.e. missing data for the field</p></li>
<li><p>Geometries are wrapped to the dateline (using
<code><a href='https://r-spatial.github.io/sf/reference/st_transform.html'>sf::st_wrap_dateline()</a></code> with the options
<code>"WRAPDATELINE=YES"</code> and <code>"DATELINEOFFSET=180"</code>).</p></li>
<li><p>Reproject data to coordinate system specified in argument to
<code>crs</code> (using <code><a href='https://r-spatial.github.io/sf/reference/st_transform.html'>sf::st_transform()</a></code>).</p></li>
<li><p>Fix any invalid geometries that have manifested
(using <code><a href='https://r-spatial.github.io/sf/reference/valid.html'>sf::st_make_valid()</a></code>).</p></li>
<li><p>Buffer areas represented as point localities to circular areas
using their reported spatial extent (using data in the field
<code>"REP_AREA"</code> and <code><a href='https://r-spatial.github.io/sf/reference/geos_unary.html'>sf::st_buffer()</a></code>; see Visconti
<em>et al.</em> 2013).</p></li>
<li><p>Snap the geometries to a grid to fix any remaining
geometry issues (using argument to <code>snap_tolerance</code> and
<code><a href='https://rdrr.io/pkg/lwgeom/man/st_snap_to_grid.html'>lwgeom::st_snap_to_grid()</a></code>).</p></li>
<li><p>Fix any invalid geometries that have manifested
(using <code><a href='https://r-spatial.github.io/sf/reference/valid.html'>sf::st_make_valid()</a></code>).</p></li>
<li><p>Simplify the protected area geometries to reduce computational burden
(using argument to <code>simplify_tolerance</code> and
<code><a href='https://r-spatial.github.io/sf/reference/geos_unary.html'>sf::st_simplify()</a></code>).</p></li>
<li><p>Fix any invalid geometries that have manifested
(using <code><a href='https://r-spatial.github.io/sf/reference/valid.html'>sf::st_make_valid()</a></code>).</p></li>
<li><p>The <code>"MARINE"</code> field is converted from integer codes
to descriptive names (i.e. <code>0</code> = <code>"terrestrial"</code>,
<code>1</code> = <code>"partial"</code>, <code>2</code> = <code>"marine"</code>).</p></li>
<li><p>Zeros in the <code>"STATUS_YR"</code> field are replaced with
missing values (i.e. <code>NA_real_</code> values).</p></li>
<li><p>Zeros in the <code>"NO_TK_AREA"</code> field are replaced with <code>NA</code>
values for areas where such data are not reported or applicable
(i.e. areas with the values <code>"Not Applicable"</code>
or <code>"Not Reported"</code> in the <code>"NO_TK_AREA"</code> field).</p></li>
<li><p>Overlapping geometries are erased from the protected area data
(discussed in Deguignet <em>et al.</em> 2017). Geometries are erased such
that areas associated with more effective management
categories (<code>"IUCN_CAT"</code>) or have historical precedence are retained
(using <code><a href='https://r-spatial.github.io/sf/reference/geos_binary_ops.html'>sf::st_difference()</a></code>).</p></li>
<li><p>Slivers are removed (geometries with areas less than 0.1 square
meters).</p></li>
<li><p>The size of areas are calculated in square kilometers and stored in
the field <code>"AREA_KM2"</code>.</p></li>
</ol>

    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Butchart SH, Clarke M, Smith RJ, Sykes RE, Scharlemann JP,
Harfoot M, ... &amp; Brooks TM (2015) Shortfalls and solutions for
meeting national and global conservation area targets.
<em>Conservation Letters</em>, <strong>8</strong>: 329--337.</p>
<p>Coetzer KL, Witkowski ET, &amp; Erasmus BF (2014) Reviewing
Biosphere Reserves globally: Effective conservation action or bureaucratic
label? <em>Biological Reviews</em>, <strong>89</strong>: 82--104.</p>
<p>Deguignet M, Arnell A, Juffe-Bignoli D, Shi Y, Bingham H, MacSharry B &amp;
Kingston N (2017) Measuring the extent of overlaps in protected area
designations. <em>PloS One</em>, <strong>12</strong>: e0188681.</p>
<p>Runge CA, Watson JEM, Butchart HM, Hanson JO, Possingham HP &amp; Fuller RA
(2015) Protected areas and global conservation of migratory birds.
<em>Science</em>, <strong>350</strong>: 1255--1258.</p>
<p>Visconti P, Di Marco M, Alvarez-Romero JG, Januchowski-Hartley SR, Pressey,
RL, Weeks R &amp; Rondinini C (2013) Effects of errors and gaps in spatial data
sets on assessment of conservation progress. <em>Conservation Biology</em>,
<strong>27</strong>: 1000--1010.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='wdpa_fetch.html'>wdpa_fetch()</a></code>,
<a href='https://www.protectedplanet.net/en/resources/calculating-protected-area-coverage'>https://www.protectedplanet.net/en/resources/calculating-protected-area-coverage</a>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \dontrun{</span>
<span class='co'># fetch data for the Liechtenstein</span>
<span class='va'>lie_raw_data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='wdpa_fetch.html'>wdpa_fetch</a></span><span class='op'>(</span><span class='st'>"LIE"</span>, wait <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: local data is out of date: Nov 2020</span></div><div class='input'>
<span class='co'># clean data</span>
<span class='va'>lie_data</span> <span class='op'>&lt;-</span> <span class='fu'>wdpa_clean</span><span class='op'>(</span><span class='va'>lie_raw_data</span><span class='op'>)</span>

<span class='co'># plot cleaned dataset</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>lie_data</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: plotting the first 9 out of 32 attributes; use max.plot = 32 to plot all</span></div><div class='img'><img src='wdpa_clean-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://jeffrey-hanson.com'>Jeffrey O Hanson</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


