<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Clean data — wdpa_clean • wdpar</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Clean data — wdpa_clean"><meta name="description" content="Clean data obtained from
Protected Planet.
Specifically, this function is designed to clean data obtained from
the World Database on Protected Areas
(WDPA) and the World Database on Other Effective Area-Based Conservation
Measures (WDOECM).
For recommended practices on cleaning large datasets
(e.g. datasets that span multiple countries or a large geographic area),
please see below."><meta property="og:description" content="Clean data obtained from
Protected Planet.
Specifically, this function is designed to clean data obtained from
the World Database on Protected Areas
(WDPA) and the World Database on Other Effective Area-Based Conservation
Measures (WDOECM).
For recommended practices on cleaning large datasets
(e.g. datasets that span multiple countries or a large geographic area),
please see below."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">wdpar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/wdpar.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/prioritizr/wdpar/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Clean data</h1>
      <small class="dont-index">Source: <a href="https://github.com/prioritizr/wdpar/blob/HEAD/R/wdpa_clean.R" class="external-link"><code>R/wdpa_clean.R</code></a></small>
      <div class="d-none name"><code>wdpa_clean.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Clean data obtained from
<a href="https://www.protectedplanet.net/en" class="external-link">Protected Planet</a>.
Specifically, this function is designed to clean data obtained from
the World Database on Protected Areas
(WDPA) and the World Database on Other Effective Area-Based Conservation
Measures (WDOECM).
For recommended practices on cleaning large datasets
(e.g. datasets that span multiple countries or a large geographic area),
please see below.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">wdpa_clean</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  crs <span class="op">=</span> <span class="st">"ESRI:54017"</span>,</span>
<span>  exclude_unesco <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  retain_status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Designated"</span>, <span class="st">"Inscribed"</span>, <span class="st">"Established"</span><span class="op">)</span>,</span>
<span>  snap_tolerance <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  simplify_tolerance <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  geometry_precision <span class="op">=</span> <span class="fl">1500</span>,</span>
<span>  erase_overlaps <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  repair_geometries <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p><code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::sf()</a></code> object containing protected area data.</p></dd>


<dt id="arg-crs">crs<a class="anchor" aria-label="anchor" href="#arg-crs"></a></dt>
<dd><p><code>character</code> or <code>integer</code> object representing a
coordinate reference system. Defaults to World Behrmann
(<code>"ESRI:54017"</code>).</p></dd>


<dt id="arg-exclude-unesco">exclude_unesco<a class="anchor" aria-label="anchor" href="#arg-exclude-unesco"></a></dt>
<dd><p><code>logical</code> should UNESCO Biosphere Reserves be excluded?
Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-retain-status">retain_status<a class="anchor" aria-label="anchor" href="#arg-retain-status"></a></dt>
<dd><p><code>character</code> vector containing the statuses for
protected areas that should be retained during the cleaning process.
Available statuses include:
<code>"Proposed"</code>, <code>"Inscribed"</code>, <code>"Adopted"</code>, <code>"Designated"</code>, and
<code>"Established"</code>.
Additionally, a <code>NULL</code> argument can be specified to ensure that no
protected areas are excluded according to their status.
The default argument is a <code>character</code> vector containing <code>"Designated"</code>,
<code>"Inscribed"</code>, and <code>"Established"</code>.
This default argument ensures that protected areas that are not currently
implemented are excluded.</p></dd>


<dt id="arg-snap-tolerance">snap_tolerance<a class="anchor" aria-label="anchor" href="#arg-snap-tolerance"></a></dt>
<dd><p><code>numeric</code> tolerance for snapping geometry to a
grid for resolving invalid geometries. Defaults to 1 meter.</p></dd>


<dt id="arg-simplify-tolerance">simplify_tolerance<a class="anchor" aria-label="anchor" href="#arg-simplify-tolerance"></a></dt>
<dd><p><code>numeric</code> simplification tolerance.
Defaults to 0 meters.</p></dd>


<dt id="arg-geometry-precision">geometry_precision<a class="anchor" aria-label="anchor" href="#arg-geometry-precision"></a></dt>
<dd><p><code>numeric</code> level of precision for processing
the spatial data (used with <code><a href="https://r-spatial.github.io/sf/reference/st_precision.html" class="external-link">sf::st_set_precision()</a></code>). The
default argument is 1500 (higher values indicate higher precision).
This level of precision is generally suitable for analyses at the
national-scale. For analyses at finer-scale resolutions, please
consider using a greater value (e.g. 10000).</p></dd>


<dt id="arg-erase-overlaps">erase_overlaps<a class="anchor" aria-label="anchor" href="#arg-erase-overlaps"></a></dt>
<dd><p><code>logical</code> should overlapping boundaries be
erased? This is useful for making comparisons between individual
protected areas and understanding their "effective" geographic coverage.
On the other hand, this processing step may not be needed
(e.g. if the protected area boundaries are going to be rasterized), and so
processing time can be substantially by skipping this step and setting
the argument to <code>FALSE</code>. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-repair-geometries">repair_geometries<a class="anchor" aria-label="anchor" href="#arg-repair-geometries"></a></dt>
<dd><p><code>logical</code> indicating if the data cleaning
procedure should repair invalid spatial geometries?
Although it is often necessary to repair geometries when working with
national or multi-national scales, it may introduce,
spatial artifacts that cause problems at local scales.
Defaults to <code>TRUE</code>.
Also, please be aware that setting <code>repair_geometries = FALSE</code>
may result in errors during the data cleaning process.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p><code>logical</code> should progress on data cleaning be reported?
Defaults to <code>TRUE</code> in an interactive session, otherwise
<code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::sf()</a></code> object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function cleans data following best practices
(Butchart <em>et al.</em> 2015; Protected Planet 2021; Runge <em>et al.</em> 2015).
To obtain accurate protected area coverage statistics for a country,
please note that you will need to manually clip the cleaned data to
the countries' coastline and its Exclusive Economic Zone (EEZ).</p>
<ol><li><p>Exclude protected areas according to their status (i.e.
<code>"STATUS"</code> field). Specifically, protected areas that have
a status not specified in the argument to <code>retain_status</code> are excluded.
By default, only protected areas that have a
<code>"Designated"</code>, <code>"Inscribed"</code>, or <code>"Established"</code> status are retained.
This means that the default behavior is to exclude protected that
are not currently implemented.</p></li>
<li><p>Exclude United Nations Educational, Scientific and Cultural
Organization (UNESCO) Biosphere Reserves (Coetzer <em>et al.</em> 2014).
This step is only performed if the argument to <code>exclude_unesco</code> is
<code>TRUE</code>.</p></li>
<li><p>Standardize column names to ensure consistency between
data stored in geodatabase and shapefile formats.
Specifically, if present, the <code>"PARENT_ISO3"</code> field is
renamed to "PARENT_ISO" and the "SHAPE" field is renamed to
<code>"geometry"</code>. Note that this field was deprecated by
Protected Planet in November 2025 and so this step is not performed for
more recent versions of the database.
This information is now provided by the <code>"PRNT_ISO3"</code> field.</p></li>
<li><p>Create a field (<code>"GEOMETRY_TYPE"</code>) indicating if areas are
represented as point localities (<code>"POINT"</code>) or as polygons
(<code>"POLYGON"</code>).</p></li>
<li><p>Exclude areas represented as point localities that do not
have a reported spatial extent (i.e. missing data for the field</p></li>
<li><p>Geometries are wrapped to the dateline (using
<code><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">sf::st_wrap_dateline()</a></code> with the options
<code>"WRAPDATELINE=YES"</code> and <code>"DATELINEOFFSET=180"</code>).</p></li>
<li><p>Reproject data to coordinate system specified in argument to
<code>crs</code> (using <code><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">sf::st_transform()</a></code>).</p></li>
<li><p>Repair any invalid geometries that have manifested
(using <code><a href="st_repair_geometry.html">st_repair_geometry()</a></code>).
Note that this step is not performed if <code>repair_geometries = FALSE</code>.</p></li>
<li><p>Buffer areas represented as point localities to circular areas
using their reported spatial extent (using data in the field
<code>"REP_AREA"</code> and <code><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">sf::st_buffer()</a></code>; see Visconti
<em>et al.</em> 2013).</p></li>
<li><p>Snap the geometries to a grid to fix any remaining
geometry issues (using argument to <code>snap_tolerance</code> and
<code><a href="https://r-spatial.github.io/lwgeom/reference/st_snap_to_grid.html" class="external-link">lwgeom::st_snap_to_grid()</a></code>).</p></li>
<li><p>Repair any invalid geometries that have manifested
(using <code><a href="st_repair_geometry.html">st_repair_geometry()</a></code>).
Note that this step is not performed if <code>repair_geometries = FALSE</code>.</p></li>
<li><p>Simplify the protected area geometries to reduce computational burden
(using argument to <code>simplify_tolerance</code> and
<code><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">sf::st_simplify()</a></code>).
Note that this step is not performed if <code>repair_geometries = FALSE</code>.</p></li>
<li><p>Repair any invalid geometries that have manifested
(using <code><a href="st_repair_geometry.html">st_repair_geometry()</a></code>).</p></li>
<li><p>If the <code>"MARINE"</code> field is present, then it will be converted from
integer codes to descriptive names (i.e. <code>0</code> = <code>"terrestrial"</code>,
<code>1</code> = <code>"partial"</code>, <code>2</code> = <code>"marine"</code>). Note that this field was deprecated
by Protected Planet in November 2025 and so this step is not performed
for more recent versions of the database.
This information is now provided by the <code>"REALM"</code> field,
wherein sites with over 10% of their area on
land are assigned a <code>"Terrestrial"</code> value, sites with over 90% of their
area in marine areas are assigned a <code>"Marine" value, and remaining sites are assigned a </code>"Coastal"` value.</p></li>
<li><p>If the <code>"PA_DEF"</code> field is present, then it will be converted from
integer codes to descriptive names (i.e. <code>0</code> = <code>"OECM"</code>, and <code>1</code> =
<code>"PA"</code>). Note that this field was deprecated by
Protected Planet in November 2025 and so this step is not performed for
more recent versions of the database.
This information is now provided by the <code>"SITE_TYPE"</code> field.</p></li>
<li><p>Zeros in the <code>"STATUS_YR"</code> field are replaced with
missing values (i.e. <code>NA_real_</code> values).</p></li>
<li><p>Zeros in the <code>"NO_TK_AREA"</code> field are replaced with <code>NA</code>
values for areas where such data are not reported or applicable
(i.e. areas with the values <code>"Not Applicable"</code>
or <code>"Not Reported"</code> in the <code>"NO_TK_AREA"</code> field).</p></li>
<li><p>Overlapping geometries are erased from the protected area data
(discussed in Deguignet <em>et al.</em> 2017). Geometries are erased such
that areas associated with more effective management
categories (<code>"IUCN_CAT"</code>) or have historical precedence are retained
(using <code><a href="https://r-spatial.github.io/sf/reference/geos_binary_ops.html" class="external-link">sf::st_difference()</a></code>).</p></li>
<li><p>Slivers are removed (geometries with areas less than 0.1 square
meters).</p></li>
<li><p>The size of areas are calculated in square kilometers and stored in
the field <code>"AREA_KM2"</code>.</p></li>
<li><p>Trimming extra leading or trailing white space characters
(i.e., <code>" "</code>, <code>"\n"</code>, <code>"\r"</code>) from fields that contain character values.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="recommended-practices-for-large-datasets">Recommended practices for large datasets<a class="anchor" aria-label="anchor" href="#recommended-practices-for-large-datasets"></a></h2>


<p>This function can be used to clean large datasets assuming that
sufficient computational resources and time are available.
Indeed, it can clean data spanning large countries, multiple
countries, and even the full global dataset.
When processing the full global dataset, it is recommended to use a
computer system with at least 32 GB RAM available and to allow for at least
one full day for the data cleaning procedures to complete.
It is also recommended to avoid using the computer system for any other
tasks while the data cleaning procedures are being completed,
because they are very computationally intensive.
Additionally, when processing large datasets – and especially
for the global dataset – it is strongly recommended to disable the
procedure for erasing overlapping areas.
This is because the built-in procedure for erasing overlaps is
very time consuming when processing many protected areas, so that
information on each protected area can be output
(e.g. IUCN category, year established).
Instead, when cleaning large datasets, it is recommended to run
the data cleaning procedures with the procedure for erasing
overlapping areas disabled (i.e. with <code>erase_overlaps = FALSE</code>).
After the data cleaning procedures have completed,
the protected area data can be manually dissolved
to remove overlapping areas (e.g. using <code><a href="wdpa_dissolve.html">wdpa_dissolve()</a></code>).
For an example of processing a large protected area dataset,
please see the vignette.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Butchart SH, Clarke M, Smith RJ, Sykes RE, Scharlemann JP,
Harfoot M, ... &amp; Brooks TM (2015) Shortfalls and solutions for
meeting national and global conservation area targets.
<em>Conservation Letters</em>, <strong>8</strong>: 329–337.</p>
<p>Coetzer KL, Witkowski ET, &amp; Erasmus BF (2014) Reviewing
Biosphere Reserves globally: Effective conservation action or bureaucratic
label? <em>Biological Reviews</em>, <strong>89</strong>: 82–104.</p>
<p>Deguignet M, Arnell A, Juffe-Bignoli D, Shi Y, Bingham H, MacSharry B &amp;
Kingston N (2017) Measuring the extent of overlaps in protected area
designations. <em>PloS One</em>, <strong>12</strong>: e0188681.</p>
<p>Runge CA, Watson JEM, Butchart HM, Hanson JO, Possingham HP &amp; Fuller RA
(2015) Protected areas and global conservation of migratory birds.
<em>Science</em>, <strong>350</strong>: 1255–1258.</p>
<p>Protected Planet (2021) Calculating protected and OECM area coverage.
Available at:
<a href="https://www.protectedplanet.net/en/resources/calculating-protected-area-coverage" class="external-link">https://www.protectedplanet.net/en/resources/calculating-protected-area-coverage</a>.</p>
<p>Visconti P, Di Marco M, Alvarez-Romero JG, Januchowski-Hartley SR, Pressey,
RL, Weeks R &amp; Rondinini C (2013) Effects of errors and gaps in spatial data
sets on assessment of conservation progress. <em>Conservation Biology</em>,
<strong>27</strong>: 1000–1010.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="wdpa_fetch.html">wdpa_fetch()</a></code>, <code><a href="wdpa_dissolve.html">wdpa_dissolve()</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># fetch data for the Liechtenstein</span></span></span>
<span class="r-in"><span><span class="va">lie_raw_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="wdpa_fetch.html">wdpa_fetch</a></span><span class="op">(</span><span class="st">"LIE"</span>, wait <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># clean data</span></span></span>
<span class="r-in"><span><span class="va">lie_data</span> <span class="op">&lt;-</span> <span class="fu">wdpa_clean</span><span class="op">(</span><span class="va">lie_raw_data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot cleaned dataset</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">lie_data</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>plotting the first 9 out of 35 attributes; use max.plot = 35 to plot all</span>
<span class="r-plt img"><img src="wdpa_clean-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="http://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

